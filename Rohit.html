<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with Rohit Negi</title>
    
    <!-- Google Fonts for a nice look -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&family=Teko:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for the send icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- All CSS is included here -->
    <style>
        :root {
            --background-color: #1a1a2e;
            --container-bg: #16213e;
            --header-bg: #0f3460;
            --user-bubble: #5372F0;
            --bot-bubble: #3a3f5a;
            --text-color: #e4e6eb;
            --placeholder-color: #a9a9a9;
            --font-main: 'Poppins', sans-serif;
            --font-heading: 'Teko', sans-serif;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-main);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: var(--background-color);
            background-image: linear-gradient(315deg, #1a1a2e 0%, #16213e 74%);
        }
        .chat-container {
            width: 100%;
            max-width: 700px;
            height: 90vh;
            max-height: 800px;
            background: var(--container-bg);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        .chat-header {
            background: var(--header-bg);
            padding: 20px;
            text-align: center;
            color: var(--text-color);
            border-bottom: 1px solid #1a1a2e;
        }
        .chat-header h1 {
            font-family: var(--font-heading);
            font-size: 2.8rem;
            font-weight: 500;
            letter-spacing: 1px;
            margin: 0;
            line-height: 1;
            color: #fca311; /* Motivational Orange */
        }
        .chat-header p { font-size: 0.9rem; opacity: 0.8; }
        .chat-window {
            flex-grow: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .chat-window::-webkit-scrollbar { width: 6px; }
        .chat-window::-webkit-scrollbar-track { background: var(--container-bg); }
        .chat-window::-webkit-scrollbar-thumb { background: var(--bot-bubble); border-radius: 3px; }
        .message { display: flex; max-width: 75%; animation: fadeIn 0.3s ease-in-out; }
        .message-content { padding: 12px 18px; border-radius: 20px; color: var(--text-color); line-height: 1.5; white-space: pre-wrap; }
        .user-message { align-self: flex-end; flex-direction: row-reverse; }
        .user-message .message-content { background: var(--user-bubble); border-bottom-right-radius: 5px; }
        .bot-message { align-self: flex-start; }
        .bot-message .message-content { background: var(--bot-bubble); border-bottom-left-radius: 5px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .typing-indicator { display: none; align-items: center; gap: 5px; padding: 10px 20px; }
        .typing-indicator span { height: 8px; width: 8px; background: var(--placeholder-color); border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; }
        .typing-indicator .dot1 { animation-delay: -0.32s; }
        .typing-indicator .dot2 { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        .chat-input-form { display: flex; align-items: center; padding: 15px 20px; border-top: 1px solid #1a1a2e; background: var(--container-bg); }
        #userInput { flex-grow: 1; border: none; outline: none; background: transparent; color: var(--text-color); font-size: 1rem; padding: 10px; }
        #userInput::placeholder { color: var(--placeholder-color); font-style: italic; }
        #sendButton { background: none; border: none; color: var(--user-bubble); font-size: 1.5rem; cursor: pointer; padding: 10px; transition: color 0.2s ease; }
        #sendButton:hover { color: #859dff; }
    </style>
</head>
<body>

    <div class="chat-container">
        <div class="chat-header">
            <h1>Rohit Negi</h1>
            <p>Your friendly mentor for GATE & Placements</p>
        </div>
        <div class="chat-window" id="chatWindow"></div>
        <div class="typing-indicator" id="typingIndicator">
            <span class="dot1"></span><span class="dot2"></span><span class="dot3"></span>
        </div>
        <form class="chat-input-form" id="chatForm">
            <input type="text" id="userInput" placeholder="Ask me anything, bhai..." autocomplete="off" required>
            <button type="submit" id="sendButton"><i class="fas fa-paper-plane"></i></button>
        </form>
    </div>

    <!-- --- All JavaScript is included here (Error-Proof Version) --- -->
    <script>
        // --- CONFIGURATION ---
        const API_KEY = "Your_Api_here";
        const MODEL_NAME = "gemini-1.5-flash";
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=${API_KEY}`;
        
        // DOM Elements
        const chatForm = document.getElementById('chatForm');
        const userInput = document.getElementById('userInput');
        const chatWindow = document.getElementById('chatWindow');
        const typingIndicator = document.getElementById('typingIndicator');

        // Rohit Negi's Persona
        const systemInstruction = {
            parts: [{
                text: `You are Rohit Negi, an AI chatbot that perfectly embodies the personality of a friendly, motivational mentor for engineering students. You are an IIT Guwahati graduate, ex-Uber SDE, and now a GATE mentor and YouTuber. Your primary goal is to give practical, honest advice in Hinglish, sharing personal experiences to guide students through competitive exams like GATE and their careers.

                **Core Personality & Tone (This is CRITICAL):**
                - **Language:** Natural Hinglish. Mix casual Hindi (bhai, yaar, gyaan, rukna nahi) with clear English terms.
                - **Tone:** You are a friendly older brother ('bada bhai'). Your tone is motivational, grounded, relatable, and sometimes slightly emotional but always optimistic. You are not a formal teacher; you are a mentor sharing real-life gyaan.
                - **Style:** Use a personal storytelling style. Start sentences with "Yaar, jab main prepare kar raha tha…", "Meri bhi same problem thi, bhai…", or "Ek baat bataun, sach mein...".

                **How You Must Behave (Your Rules):**
                1.  **Be Relatable:** Talk about your own failures and struggles. Mention your experience with TCS, your own mistakes during prep, etc. This builds trust.
                2.  **Motivate the Lost:** Your main audience is students in their 3rd/4th year or drop year who feel lost. Give them hope and a clear path. End conversations with powerful lines like "Tu kar sakta hai bhai, bas rukna nahi!" or "Hum rukenge nahi jab tak kar nahi lete!".
                3.  **Give Practical Advice:** Prioritize strategy over just lectures. Emphasize self-made notes, consistent revision, and problem-solving. Explain *why* these things are important, using your own experience.
                4.  **Honesty First:** Don't sugarcoat. If a student's strategy is flawed, tell them honestly but kindly. For example, "Strongest subject ko ego mat banana, bhai, warna last mein regret hoga."
                5.  **Explain Simply:** Avoid overly technical jargon. Explain concepts as if you're teaching a confused friend.

                **Your Signature Phrases (Use these or similar phrases to sound authentic):**
                - "Main bhi TCS ka test diya tha bhai, ek bhi question nahi hua tha..."
                - "Agar main kar sakta hoon, tu bhi kar sakta hai, bas mehnat sahi direction mein honi chahiye."
                - "Maths ko halke mein mat lena—meri sabse badi galti yahi thi!"
                - "Apne notes khud banao, bhai. Lecture dekhne se rank nahi aati, notes revise karne se aati hai."
                - "Jab tak concept clear na ho, aage mat badho. Quality over quantity."
                - "GATE preparation mein revision sabse, sabse important hota hai. Bhoolna mat!"
                `
            }]
        };

        // Initial conversation starter
        const history = [
            { role: 'user', parts: [{ text: "Hey Rohit bhai" }] },
            { role: 'model', parts: [{ text: "Hey bhai, kaise ho? Koi tension chal rahi hai preparation ko leke? Don't worry, sab aaram se discuss karenge. Batao, kya chal raha hai?" }] }
        ];

        // Function to display messages
        function displayMessage(message, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message', `${sender}-message`);
            const contentP = document.createElement('p');
            contentP.classList.add('message-content');
            contentP.textContent = message;
            messageDiv.appendChild(contentP);
            chatWindow.appendChild(messageDiv);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Display initial messages on page load
        document.addEventListener('DOMContentLoaded', () => {
             if (API_KEY === "PASTE_YOUR_GOOGLE_API_KEY_HERE") {
                alert("WARNING: Please open the HTML file in a text editor and replace 'PASTE_YOUR_GOOGLE_API_KEY_HERE' with your actual Google AI API key.");
            }
            history.forEach(msg => displayMessage(msg.parts[0].text, msg.role === 'user' ? 'user' : 'bot'));
        });

        // Handle form submission
        chatForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const userProblem = userInput.value.trim();
            if (!userProblem) return;

            displayMessage(userProblem, 'user');
            history.push({ role: 'user', parts: [{ text: userProblem }] });
            userInput.value = '';
            typingIndicator.style.display = 'flex';

            const payload = {
                contents: history,
                systemInstruction: systemInstruction,
                safetySettings: [
                    { category: "HARM_CATEGORY_HARASSMENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_HATE_SPEECH", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_SEXUALLY_EXPLICIT", threshold: "BLOCK_MEDIUM_AND_ABOVE" },
                    { category: "HARM_CATEGORY_DANGEROUS_CONTENT", threshold: "BLOCK_MEDIUM_AND_ABOVE" }
                ]
            };

            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload),
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();

                if (!data.candidates || data.candidates.length === 0) {
                    let errorMessage = "Sorry bhai, abhi thoda server ka issue lag raha hai... Thodi der mein try karna.";
                    if (data.promptFeedback && data.promptFeedback.blockReason) {
                        errorMessage = `Bhai, lagta hai AI ka safety filter trigger ho gaya (Reason: ${data.promptFeedback.blockReason}). Chal, thoda alag tarike se pooch? Let's try again.`;
                    }
                    throw new Error(errorMessage);
                }
                
                const botResponse = data.candidates[0].content.parts[0].text;
                
                history.push({ role: 'model', parts: [{ text: botResponse }] });
                displayMessage(botResponse, 'bot');

            } catch (error) {
                console.error("Error chatting:", error);
                displayMessage(error.message, 'bot');
            } finally {
                typingIndicator.style.display = 'none';
            }
        });
    </script>
</body>
</html>